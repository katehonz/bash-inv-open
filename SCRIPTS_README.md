# Invoice Application - Start/Stop Scripts

Този проект включва удобни shell скриптове за лесно стартиране и спиране на приложението.

## Скриптове

### `start.sh` - Стартиране на приложението

Стартира и backend (Spring Boot) и frontend (React) сървърите.

**Използване:**
```bash
./start.sh
```

**Какво прави:**
- Проверява дали портовете са свободни (8080 за backend, 3000/3001 за frontend)
- Стартира backend на порт 8080
- Стартира frontend на порт 3000 (или 3001 ако 3000 е зает)
- Създава PID файлове в `.pids/` директория за проследяване на процесите
- Създава log файлове в `.pids/backend.log` и `.pids/frontend.log`

**След стартиране можете да достъпите:**
- Frontend: http://localhost:3000 (или 3001)
- Backend API: http://localhost:8080
- GraphiQL: http://localhost:8080/graphiql

### `stop.sh` - Спиране на приложението

Спира всички процеси на приложението на всички портове.

**Използване:**
```bash
./stop.sh
```

**Какво прави:**
- Спира всички процеси на порт 8080 (backend)
- Спира всички процеси на порт 3000 (frontend)
- Спира всички процеси на порт 3001 (frontend)
- Спира всички Maven процеси (`mvn spring-boot:run`)
- Спира всички Java процеси на backend приложението
- Спира всички Node.js процеси на React (`react-scripts start`)
- Изчиства PID файловете

**Това гарантира, че:**
- Няма висящи процеси
- Всички портове са освободени
- Можете да стартирате приложението отново чисто

## Примерна сесия

```bash
# Стартиране на приложението
./start.sh

# ... работа с приложението ...

# Спиране на приложението
./stop.sh

# Стартиране отново
./start.sh
```

## Преглед на логове

След стартиране можете да прегледате логовете в реално време:

```bash
# Backend логове
tail -f .pids/backend.log

# Frontend логове
tail -f .pids/frontend.log
```

## Забележки

- Скриптовете са тествани на Linux
- Изискват `lsof` за проверка на портове
- Използват `nohup` за стартиране на процеси във фонов режим
- PID файловете се съхраняват в `.pids/` директория
- При спиране първо се опитва graceful shutdown (SIGTERM), после force kill (SIGKILL)

## Troubleshooting

Ако има проблем със стартирането:

1. Първо спрете всички процеси:
   ```bash
   ./stop.sh
   ```

2. Проверете дали портовете са свободни:
   ```bash
   lsof -i :8080 -i :3000 -i :3001
   ```

3. Ако все още има процеси, можете ръчно да ги убиете:
   ```bash
   # Убиване на процеси на конкретен порт
   kill -9 $(lsof -ti:8080)
   kill -9 $(lsof -ti:3000)
   kill -9 $(lsof -ti:3001)
   ```

4. Стартирайте отново:
   ```bash
   ./start.sh
   ```
